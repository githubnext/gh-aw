---
title: Managing npm Dependencies with Dependabot
description: Automatically track and update npm packages used in MCP servers with Dependabot integration
sidebar:
  order: 250
---

When workflows use npm-based MCP servers via `npx`, the system can automatically generate Dependabot manifests to track dependencies and receive automated updates.

## Prerequisites

- Node.js and npm installed locally
- npm-based MCP servers configured in workflows
- Write access to repository for Dependabot configuration

## Generating Dependabot Manifests

Use the `--dependabot` flag with `gh aw compile` to automatically generate:

- `package.json` with all npm packages used across workflows
- `package-lock.json` for dependency resolution
- `.github/dependabot.yml` for automated dependency updates

```bash
gh aw compile --dependabot
```

The command scans all workflows in `.github/workflows/`, detects npm packages used in `npx` commands, and generates the required files.

## How It Works

### Detection

The compiler identifies npm packages from MCP server configurations:

```yaml
mcp-servers:
  playwright:
    command: "npx"
    args: ["-y", "@playwright/mcp@latest"]
```

From this configuration, it extracts `@playwright/mcp` with version `latest`.

### Manifest Generation

**package.json**: Created or updated in `.github/workflows/package.json` with dependencies from all workflows merged together. If the file exists, dependencies are merged with existing entries.

**package-lock.json**: Generated by running `npm install --package-lock-only` to lock dependency versions without installing node_modules.

**dependabot.yml**: Created or updated in `.github/dependabot.yml` to enable weekly npm dependency scans for the workflows directory. Existing configurations are preserved unless `--force` is specified.

## Overwriting Existing Files

By default, existing `dependabot.yml` files are preserved. Use `--force` to overwrite:

```bash
gh aw compile --dependabot --force
```

This updates the Dependabot configuration while maintaining any non-npm update entries.

## Version Handling

Versions are extracted from package specifiers:

- `@playwright/mcp@latest` → `"@playwright/mcp": "latest"`
- `markitdown@1.2.0` → `"markitdown": "1.2.0"`
- `simple-package` → `"simple-package": "latest"`

When the same package appears in multiple workflows with different versions, the last-seen version is used.

## Limitations

The `--dependabot` flag:

- Only processes workflows in the default `.github/workflows/` directory
- Cannot be used with specific workflow files (must compile all workflows)
- Cannot be used with custom `--workflows-dir`
- Requires npm to be available in PATH
- Only detects npm packages used via `npx` in MCP server configurations

## Troubleshooting

**npm not found**: Install Node.js and npm, then ensure npm is in your PATH.

**package-lock.json generation failed**: Check npm output for dependency resolution errors. Verify package names and versions are valid.

**No npm dependencies detected**: The command only generates files when npm packages are found in workflow MCP server configurations. Verify your workflows use npm-based MCP servers.

## Related Documentation

- [Using MCPs](/gh-aw/guides/mcps/) - Configure MCP servers in workflows
- [CLI Commands](/gh-aw/tools/cli/) - Complete command reference
- [Workflow Structure](/gh-aw/reference/workflow-structure/) - Directory organization
