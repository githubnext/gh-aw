---
title: Frontmatter
description: Complete guide to all available frontmatter configuration options for GitHub Agentic Workflows, including triggers, permissions, AI engines, and workflow settings.
sidebar:
  order: 200
---

This guide explains the frontmatter section of GitHub Agentic Workflows, including triggers, permissions, AI engines, and workflow settings.

## Frontmatter Elements

The YAML frontmatter supports standard GitHub Actions properties plus additional agentic-specific options:

**Standard GitHub Actions Properties:**
- `on`: Trigger events for the workflow
- `permissions`: Required permissions for the workflow
- `run-name`: Name of the workflow run
- `runs-on`: Runner environment for the workflow
- `timeout_minutes`: Workflow timeout
- `concurrency`: Concurrency settings for the workflow
- `env`: Environment variables for the workflow
- `environment`: Environment that the job references (for protected environments and deployments)
- `container`: Container to run the job steps in
- `services`: Service containers for the job (databases, caches, etc.)
- `if`: Conditional execution of the workflow
- `steps`: Custom steps for the job
- `cache`: Cache configuration for workflow dependencies

**Properties specific to GitHub Agentic Workflows:**
- `description`: Human-readable description rendered as a comment in the lock file
- `source`: Source reference tracking where the workflow was added from (format: `owner/repo/path@ref`)
- `imports`: List of files to import (see [Packaging and Updating](/gh-aw/guides/packaging-imports/))
- `engine`: AI engine configuration (copilot/claude/codex) with optional max-turns setting
- `strict`: Enable strict mode validation (boolean, defaults to false)
- `roles`: Permission restrictions based on repository access levels
- `safe-outputs`: [Safe Output Processing](/gh-aw/reference/safe-outputs/)
- `network`: Network access control for AI engines
- `tools`: Available tools and MCP servers for the AI engine
- `cache-memory`: [Persistent memory configuration](/gh-aw/reference/cache-memory/)

### Trigger Events (`on:`)

The `on:` section uses standard GitHub Actions syntax to define workflow triggers. See [Trigger Events](/gh-aw/reference/triggers/).

### Description (`description:`)

The `description:` field provides a human-readable description of the workflow that is rendered as a comment in the generated lock file. This helps document the purpose and functionality of the workflow.

```yaml
description: "Workflow that analyzes pull requests and provides feedback"
```

The description appears in the lock file header as a comment:

```yaml
# This file was automatically generated by gh-aw. DO NOT EDIT.
# To update this file, edit the corresponding .md file and run:
#   gh aw compile
# For more information: https://github.com/githubnext/gh-aw/blob/main/.github/instructions/github-agentic-workflows.instructions.md
#
# Workflow that analyzes pull requests and provides feedback

name: "PR Analyzer"
...
```

### Source Tracking (`source:`)

The `source:` field tracks the origin of workflows added using the `gh aw add` command. This field is automatically populated when installing workflows from external repositories and provides traceability for workflow provenance.

**Format:** `owner/repo/path@ref`

```yaml
source: "githubnext/agentics/workflows/ci-doctor.md@v1.0.0"
```

**Examples:**
- `githubnext/agentics/workflows/ci-doctor.md@v1.0.0` - Workflow from a specific version tag
- `githubnext/agentics/workflows/daily-plan.md@main` - Workflow from the main branch
- `githubnext/agentics/workflows/helper-bot.md` - Workflow without version specification

**Automatic Population:**

When you use the `gh aw add` command, the source field is automatically added to the workflow frontmatter:

```bash
# Command
gh aw add githubnext/agentics/ci-doctor@v1.0.0

# Generated frontmatter includes:
source: "githubnext/agentics/workflows/ci-doctor.md@v1.0.0"
```

**Benefits:**
- **Traceability**: Know exactly where a workflow came from and which version
- **Updates**: Easy identification of the source repository for checking updates
- **Documentation**: Automatic documentation of workflow provenance
- **Auditing**: Track workflow origins for security and compliance purposes

**Note:** The `source` field is optional. Workflows created manually or without using `gh aw add` don't need to include it.

### Permissions (`permissions:`)

The `permissions:` section uses standard GitHub Actions permissions syntax to specify the permissions relevant to the agentic (natural language) part of the execution of the workflow. See [GitHub Actions permissions documentation](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#permissions).

```yaml
# Specific permissions
permissions:
  issues: write
  contents: read
  pull-requests: write

# All permissions
permissions: write-all
permissions: read-all

# No permissions
permissions: {}
```

If you specify any permission, unspecified ones are set to `none`.

### Repository Access Roles (`roles:`)

The `roles:` section controls who can trigger agentic workflows based on their repository permission level. By default, workflows are restricted to users with `admin` or `maintainer` permissions for security reasons.

```yaml
# Default behavior (admin or maintainer required)
roles: [admin, maintainer]

# Allow additional permission levels
roles: [admin, maintainer, write]

# Allow any authenticated user (use with caution)
roles: all

# Single role as a string
roles: admin
```

**Available repository roles:**
- **`admin`**: Full administrative access to the repository
- **`maintainer`**: Can manage the repository and its settings (renamed from `maintain` in GitHub)  
- **`write`**: Can push to the repository and manage issues and pull requests
- **`read`**: Can read and clone the repository
- **`all`**: Disables permission checking entirely (⚠️ security consideration)

**Behavior:**
- Workflows with potentially unsafe triggers (like `push`, `issues`, `pull_request`) automatically include permission checks
- "Safe" triggers like `schedule` and `workflow_run` skip permission checks by default
- `workflow_dispatch` is treated as safe only when `write` is in the allowed roles (since workflow_dispatch can be triggered by users with write access)
- When permission checks fail, the workflow is automatically cancelled with a warning message
- Users without sufficient permissions will see the workflow start but then immediately stop

### Strict Mode (`strict:`)

The `strict:` field enables enhanced validation for production workflows, enforcing security and reliability constraints. When enabled, the compiler will reject workflows that don't meet strict mode requirements.

```yaml
# Enable strict mode for this workflow
strict: true

# Explicitly disable strict mode (default)
strict: false
```

**Strict Mode Requirements:**

When `strict: true`, the workflow must satisfy these requirements:

1. **Write Permissions Blocked**: Cannot use `contents: write`, `issues: write`, or `pull-requests: write` permissions (use `safe-outputs` instead for controlled GitHub API interactions)
2. **Network Configuration Required**: Must explicitly configure network access (cannot rely on default behavior)
3. **No Network Wildcards**: Cannot use wildcard `*` in `network.allowed` domains
4. **MCP Network Configuration**: Custom MCP servers with containers must have network configuration

**Example Strict Mode Workflow:**

```yaml
---
on: push
strict: true
permissions:
  contents: read
engine: claude
network:
  allowed:
    - "api.example.com"
    - "*.trusted.com"
---

# Strict Mode Workflow
This workflow follows all strict mode requirements.
```

**Enabling Strict Mode:**

Strict mode can be enabled in two ways:
- **Frontmatter**: Add `strict: true` to the workflow frontmatter (per-workflow control)
- **CLI flag**: Use `gh aw compile --strict` (applies to all workflows being compiled)

The CLI `--strict` flag takes precedence over frontmatter settings. If the CLI flag is used, workflows with `strict: false` will still be validated in strict mode.

**Use Cases:**
- Production workflows that require enhanced security validation
- Workflows with elevated permissions that need extra scrutiny
- Workflows that need to comply with security policies

### AI Engine (`engine:`)

The `engine:` section specifies which AI engine to use to interpret the markdown section of the workflow, and controls options about how this execution proceeds. See [AI Engines](/gh-aw/reference/engines/) for details.

```yaml
engine: copilot
```

### Network Permissions (`network:`)

Control network access for AI engines using ecosystem identifiers and domain allowlists. See [Network Permissions](/gh-aw/reference/network/) for detailed configuration options, security model, and examples.

Quick example:
```yaml
engine:
  id: claude

network:
  allowed:
    - defaults              # Basic infrastructure
    - python               # Python/PyPI ecosystem
    - "api.example.com"    # Custom domain
```

### Safe Outputs (`safe-outputs:`)

See [Safe Outputs Processing](/gh-aw/reference/safe-outputs/) for automatic issue creation, comment posting and other safe outputs.

### Run Configuration (`run-name:`, `runs-on:`, `timeout_minutes:`)

Standard GitHub Actions properties:
```yaml
run-name: "Custom workflow run name"  # Defaults to workflow name
runs-on: ubuntu-latest               # Defaults to ubuntu-latest
timeout_minutes: 30                  # Defaults to 20 minutes
```

### Workflow Concurrency Control (`concurrency:`)

GitHub Agentic Workflows automatically generates concurrency policies for the agent job to control concurrent execution.

See [Concurrency Control](/gh-aw/reference/concurrency/) for complete documentation on agent concurrency configuration.

## Environment Variables (`env:`)

GitHub Actions standard `env:` syntax:

```yaml
env:
  CUSTOM_VAR: "value"
  SECRET_VAR: ${{ secrets.MY_SECRET }}
```

## Environment Protection (`environment:`)

The `environment:` section specifies the environment that the job references, enabling deployment protection rules and environment-specific secrets and variables. This follows standard GitHub Actions syntax for job-level environment configuration.

**Simple environment name:**
```yaml
environment: production
```

For more information about environments, see [GitHub Action's environment documentation](https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment).

## Container Configuration (`container:`)

The `container:` section specifies a container to run the job steps in, useful for standardized execution environments or specific runtime requirements.

**Simple container image:**
```yaml
container: node:18
```

For more information about environments, see [GitHub Action's container documentation](https://docs.github.com/en/actions/how-tos/write-workflows/choose-where-workflows-run/run-jobs-in-a-container).

## Service Containers (`services:`)

The `services:` section defines service containers that run alongside your job, commonly used for databases, caches, or other dependencies during testing and deployment.

**Simple service:**
```yaml
services:
  postgres:
    image: postgres:13
    env:
      POSTGRES_PASSWORD: postgres
    ports:
      - 5432:5432
```

For more information about containers and services, see [GitHub Action's container documentation](https://docs.github.com/en/actions/using-containerized-services).

## Conditional Execution (`if:`)

Standard GitHub Actions `if:` syntax:

```yaml
if: github.event_name == 'push'
```

## Custom Steps (`steps:`)

Add custom steps before the agentic execution step using GitHub Actions standard `steps:` syntax:

```yaml
steps:
  - name: Install dependencies
    run: npm ci
```

If no custom steps are specified, a default step to checkout the repository is added automatically.

## Cache Configuration (`cache:`)

Cache configuration using standard GitHub Actions `actions/cache` syntax:

Single cache:
```yaml
cache:
  key: node-modules-${{ hashFiles('package-lock.json') }}
  path: node_modules
  restore-keys: |
    node-modules-
```

## Related Documentation

- [Trigger Events](/gh-aw/reference/triggers/) - Complete guide to workflow triggers and event configuration
- [AI Engines](/gh-aw/reference/engines/) - Complete guide to Claude, Copilot, Codex, and custom engines
- [CLI Commands](/gh-aw/tools/cli/) - CLI commands for workflow management
- [Workflow Structure](/gh-aw/reference/workflow-structure/) - Directory layout and organization
- [Network Permissions](/gh-aw/reference/network/) - Network access control configuration
- [Command Triggers](/gh-aw/reference/command-triggers/) - Special @mention triggers and context text
- [MCPs](/gh-aw/guides/mcps/) - Model Context Protocol setup and configuration
- [Tools](/gh-aw/reference/tools/) - GitHub and other tools setup
- [Imports](/gh-aw/reference/imports/) - Modularizing workflows with includes
