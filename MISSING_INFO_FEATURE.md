# Test Missing Tools/Data Footer Feature

This document demonstrates how the missing tool and missing data information is displayed in safe output footers.

## Example Workflow Output

When an agent workflow produces safe output messages (like `create_issue` or `add_comment`) along with `missing_tool` and `missing_data` messages, the footer will automatically include debugging information.

### Example Messages

```json
{
  "items": [
    {
      "type": "missing_tool",
      "tool": "docker",
      "reason": "Need containerization support for building images",
      "alternatives": "Use GitHub Actions container service or VM"
    },
    {
      "type": "missing_data",
      "data_type": "api_credentials",
      "reason": "GitHub API token not configured",
      "context": "Required for accessing private repository data",
      "alternatives": "Use read-only public access"
    },
    {
      "type": "create_issue",
      "title": "Test Issue with Missing Info",
      "body": "This issue was created by the workflow."
    }
  ]
}
```

### Expected Footer Output

The footer of the created issue would look like:

```markdown
> AI generated by [WorkflowName](https://github.com/owner/repo/actions/runs/123456)

<details>
<summary><b>Missing Tools</b></summary>

- **docker**: Need containerization support for building images
  - *Alternatives*: Use GitHub Actions container service or VM

</details>

<details>
<summary><b>Missing Data</b></summary>

- **api\_credentials**: GitHub API token not configured
  - *Context*: Required for accessing private repository data
  - *Alternatives*: Use read-only public access

</details>

<!-- agentic-workflow: WorkflowName, run: https://github.com/... -->
```

## How It Works

1. **Collection Phase**: The `safe_output_handler_manager` collects all `missing_tool` and `missing_data` messages before processing other messages.

2. **Storage Phase**: Collected missings are stored in a global helper module accessible by all handlers.

3. **Footer Generation**: When handlers generate footers (via `generateFooter()` or `generateFooterWithMessages()`), they automatically append the missing information as HTML details sections.

4. **Display**: The HTML details sections appear collapsed by default, providing instant debugging info without cluttering the main content.

## Benefits

- **Instant Debugging**: Users immediately see what tools or data are missing
- **Context Preservation**: Alternatives and context help users understand workarounds
- **Clean UI**: HTML details sections keep the information accessible but not intrusive
- **Security**: Markdown escaping prevents injection attacks
