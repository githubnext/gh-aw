---
name: Dictation Prompt Generator
on:
  workflow_dispatch:

permissions:
  contents: read
  actions: read

engine: copilot

tools:
  edit:
  bash:
    - "*"
  github:
    allowed:
      - get_file_contents
      - search_code

safe-outputs:
  create-pull-request:
    title-prefix: "[docs] "
    labels: [documentation, automation]
    draft: false

timeout_minutes: 10
---

# Dictation Prompt Generator

You are an AI agent tasked with creating a dictation prompt that helps rephrase text generated by speech-to-text recognition for use in this repository's context.

## Your Mission

Create a comprehensive dictation instruction file at `.github/instructions/dictation.instructions.md` that:
1. Contains a glossary of approximately 100 project-specific terms (95-105 is acceptable)
2. Provides instructions for fixing ambiguous sentences using technical terminology
3. Rephrases text to create proper agentic planning prompts for GitHub Copilot

## Task Steps

### 1. Scan Repository for Project-Specific Glossary

Your first task is to extract a comprehensive glossary of terms specific to this project. Use bash commands and GitHub tools to analyze the codebase.

**Analyze these sources:**

```bash
# Scan Go source files for package names, types, and functions
find pkg -name "*.go" -exec grep -h "^package\|^type\|^func" {} + | head -100

# Scan markdown files for technical terms
find .github/workflows -name "*.md" -exec grep -h "^#\|^##" {} + | head -50

# Check README and documentation for key terms
cat README.md DEVGUIDE.md CONTRIBUTING.md | grep -E "^#|^\*\*|^-" | head -100

# List main directories and key files
ls -1 pkg/ cmd/ .github/workflows/ | head -50
```

**Extract terms from these categories:**

1. **Package names**: workflow, parser, cli, console, logger, etc.
2. **Technical components**: MCP servers, engines (copilot, claude, codex), frontmatter, YAML, lockfile
3. **Actions and commands**: compile, audit, logs, mcp, trial, enable, disable
4. **Configuration terms**: safe-outputs, permissions, tools, cache-memory, toolset
5. **GitHub concepts**: workflow_dispatch, pull_request, issues, discussions, permissions
6. **Repository-specific**: agentic workflows, gh-aw, activation, execution steps
7. **File types and formats**: markdown, lockfile (.lock.yml), frontmatter, YAML
8. **Tool types**: edit, bash, github, playwright, web-fetch, web-search
9. **Programming concepts**: struct, schema, validation, compilation, parsing
10. **Operations**: recompile, fmt, lint, test-unit, test-integration

**Goal**: Create a list of approximately 100 terms (95-105 is acceptable) that are most relevant to this project, avoiding generic software engineering terms that are universally known.

### 2. Extract Known Technical Terms

In addition to the project-specific glossary, note common technical/software development terms that should be recognized:

- repository, commit, branch, merge, pull request, issue
- CI/CD, GitHub Actions, runner, job, step
- API, HTTP, JSON, YAML, XML, markdown
- function, method, class, interface, struct, type
- build, test, lint, format, compile
- environment, variable, configuration, parameter
- debug, error, warning, log, trace
- container, Docker, image, volume
- authentication, token, secret, permission
- timeout, concurrency, async, sync

These terms should be recognized but don't need to be in the 100-word glossary.

### 3. Create the Dictation Instructions File

Create the file `.github/instructions/dictation.instructions.md` with the following structure:

```markdown
# Dictation Prompt Instructions

This file provides instructions for rephrasing text generated by speech-to-text recognition, optimized for creating agentic workflow prompts in the gh-aw repository.

## Project Glossary

The following terms are specific to this project and should be recognized and used correctly:

[List all 100 terms here, one per line, no descriptions, alphabetically sorted]

## Technical Context

This repository is for **GitHub Agentic Workflows (gh-aw)**, a Go-based GitHub CLI extension for writing agentic workflows in natural language using markdown files with YAML frontmatter, which compile to GitHub Actions workflows.

## Rephrasing Guidelines

### 1. Fix Ambiguous Terms

When speech-to-text generates ambiguous terms, replace them with the correct technical term from the glossary or standard software development terminology:

**Common Misrecognitions:**
- "ghaw" → "gh-aw" (the CLI tool name)
- "work flow" → "workflow" (single word)
- "front matter" → "frontmatter" (single word in this context)
- "lock file" → "lockfile" or ".lock.yml" (depending on context)
- "MCP" (spoken as letters) → keep as "MCP" (Model Context Protocol)
- "YAML" (spoken as "yamel") → keep as "YAML"
- "co-pilot" → "copilot" (single word)
- "claude" (various pronunciations) → "Claude" (capitalize)
- "code X" / "codex" → "Codex" (capitalize)
- "safe outputs" → "safe-outputs" (hyphenated in config)
- "cache memory" → "cache-memory" (hyphenated in config)

### 2. Sentence Structure for Agentic Prompts

Transform casual dictated sentences into clear, imperative agentic task descriptions:

**Before (dictated):**
> "so I want you to maybe go ahead and compile the workflows and then after that you should probably check if there are any errors"

**After (agentic prompt):**
> "Compile all workflows in .github/workflows/ and validate for errors. Report any compilation failures with specific error messages."

**Key transformations:**
- Remove filler words: "so", "maybe", "probably", "I think", "you should"
- Use imperative mood: "Compile", "Create", "Update", "Analyze"
- Be specific: Add file paths, parameter values, expected outputs
- Use active voice: "Generate a report" not "A report should be generated"
- Break complex requests into numbered steps when needed

### 3. Tone Adjustment

Convert casual speech into professional technical instructions:

**Casual tone:**
> "Hey, can you take a look at the code and see if there's anything weird going on with the MCP server configuration?"

**Professional agentic prompt:**
> "Review MCP server configurations in the workflow frontmatter. Identify any misconfigurations or deprecated settings. Provide specific recommendations for fixes."

**Guidelines:**
- Remove greetings and pleasantries
- Replace vague terms ("weird", "stuff", "things") with specific technical terms
- Add measurable outcomes when possible
- Include context about where to look or what to examine
- Specify the expected output format

### 4. Context Enhancement

Add necessary context that might be implicit in spoken requests:

**Under-specified:**
> "Update the documentation"

**Enhanced with context:**
> "Update the documentation in docs/src/content/docs/ to reflect the new safe-outputs configuration options. Follow the Diátaxis framework and Astro Starlight syntax as specified in .github/instructions/documentation.instructions.md"

## Example Transformations

### Example 1: Workflow Creation

**Dictated input:**
> "create a work flow that runs when someone opens an issue and it should use co-pilot to analyze the issue and then maybe post a comment with suggestions"

**Rephrased output:**
> "Create an agentic workflow at .github/workflows/issue-analyzer.md that triggers on issue open events. Configure the copilot engine to analyze issue content using the sanitized context from needs.activation.outputs.text. Use safe-outputs add-comment to post analysis results. Include permissions for contents:read and actions:read."

### Example 2: Compilation Task

**Dictated input:**
> "so I need you to compile all the markdown files in the workflows directory and make sure the lock files are up to date"

**Rephrased output:**
> "Compile all .md workflow files in .github/workflows/ to generate corresponding .lock.yml files. Run './gh-aw compile' to process all workflows. Verify that each .md file has a matching compiled .lock.yml file."

### Example 3: Investigation Request

**Dictated input:**
> "can you check why the MCP server thing isn't working in the copilot engine I think there might be something wrong with the configuration"

**Rephrased output:**
> "Investigate MCP server configuration issues in the copilot engine implementation. Check pkg/workflow/copilot_engine.go for MCP config generation. Review mcp-config.json format and verify environment variable setup. Examine recent workflow run logs using './gh-aw logs' for error patterns."

## Usage

When using this prompt with speech-to-text dictation:

1. Speak your request naturally
2. The dictation system will transcribe your speech
3. Apply these rephrasing rules to convert the transcription into a proper agentic prompt
4. The resulting prompt should be clear, specific, and actionable for GitHub Copilot agents

## Notes

- This prompt is specifically designed for the gh-aw repository context
- Terms in the glossary should be recognized even if pronounced unclearly
- When in doubt, prefer explicit detail over brevity
- Always specify file paths, commands, and expected outputs
- Use the imperative mood for all task descriptions
```

### 4. Generate the Actual Content

Use your analysis of the repository to populate the glossary with approximately 100 relevant terms (95-105 is acceptable). Scan the codebase thoroughly to identify the most important and frequently used terms.

### 5. Create Pull Request

After creating the dictation instructions file:

1. Use the safe-outputs create-pull-request to submit your changes
2. Title: "[docs] Add dictation prompt instructions for speech-to-text optimization"
3. Include a PR description that explains:
   - The purpose of the dictation instructions
   - How the glossary was generated
   - How to use the instructions with speech-to-text systems

## Important Guidelines

- **Be Thorough**: Scan the entire codebase to extract accurate terms
- **Be Precise**: The glossary should contain approximately 100 terms (95-105 is acceptable)
- **Prioritize Relevance**: Include terms that are actually used frequently in this project
- **Avoid Duplicates**: Each term should appear only once in the glossary
- **Alphabetize**: Sort the glossary alphabetically for easy reference
- **No Descriptions**: The glossary should be a simple list of terms, no definitions
- **Focus on Specificity**: Prefer project-specific terms over generic software terms
- **Consider Pronunciation**: Include terms that might be challenging for speech-to-text

## Success Criteria

Your task is complete when:
1. ✅ The file `.github/instructions/dictation.instructions.md` exists
2. ✅ It contains approximately 100 project-specific terms in the glossary (95-105 is acceptable)
3. ✅ The rephrasing guidelines are clear and actionable
4. ✅ Examples demonstrate proper transformation from dictated to agentic prompts
5. ✅ A pull request has been created with the new file

Good luck! This dictation prompt will help make speech-to-text interaction with the repository much more effective.
