name: "Check if actor is team member"
description: "Checks if the current GitHub actor is a member of the repository's organization/team"
outputs:
  is_team_member:
    description: "Boolean indicating if the actor is a team member (true/false)"
runs:
  using: "composite"
  steps:
    - name: Check team membership
      uses: actions/github-script@v7
      with:
        script: |
          const actor = context.actor;
          const { owner, repo } = context.repo;
          
          // Check if the actor has repository access (admin, maintain permissions)
          try {
            console.log(`Checking if user '${actor}' is admin or maintainer of ${owner}/${repo}`);
          
            const repoPermission = await github.rest.repos.getCollaboratorPermissionLevel({
              owner: owner,
              repo: repo,
              username: actor
            });
            
            const permission = repoPermission.data.permission;
            console.log(`Repository permission level: ${permission}`);
            
            if (permission === 'admin' || permission === 'maintain') {
              console.log(`User has ${permission} access to repository`);
              core.setOutput('is_team_member', 'true');
              return;
            }
          } catch (repoError) {
            console.log(`Repository permission check failed: ${repoError.message}`);
          }
          
          core.setOutput('is_team_member', 'false');
            
